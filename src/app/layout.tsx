// μ„λ²„ μ»΄ν¬λ„νΈλ” μ•„λμ™€ κ°™μ€ κ²½μ°μ— μ‚¬μ©ν•©λ‹λ‹¤. β¨
// - μ‚¬μ©μμ™€ μƒνΈμ‘μ©ν•μ§€ μ•λ” κ²½μ°
// - λ°±μ—”λ“μ— μ—‘μ„Έμ¤ν•λ©΄μ„ λ³΄μ•μ μΌλ΅ μ„ν—ν• μ •λ³΄λ¥Ό μ£Όκ³  λ°›λ” κ²½μ°

// ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ•„λμ™€ κ°™μ€ κ²½μ° μ‚¬μ©ν•©λ‹λ‹¤. β­οΈ
// - μ„λ²„ μ»΄ν¬λ„νΈλ΅ ν•΄κ²°λμ§€ μ•λ” κ²½μ°
// - μ‚¬μ©μμ™€ μƒνΈμ‘μ©ν•λ” κ²½μ°
// - useEffect, useState, onClick, onChangeμ™€ κ°™μ€ APIλ¥Ό μ‚¬μ©ν•΄μ•Ό ν•λ” κ²½μ°
// - useRouter, useParamsμ™€ κ°™μ€ nextjsμ client component APIλ¥Ό μ‚¬μ©ν•λ” κ²½μ°

// ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό μ‚¬μ©ν•κΈ° μ„ν•΄μ„λ” use client λ¥Ό μ„ μ–Έν•΄μ£Όμ–΄μ•Ό ν•λ‹¤.(Next.jsμ—μ„λ” κΈ°λ³Έμ μΌλ΅ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μ‚¬μ©)
// "use client";

// Server Componentμ μ¥μ  π™
// - κ°„κ²°ν• μ½”λ“: useEffectμ™€ useStateμ™€ κ°™μ€ ν›…μ„ μ‚¬μ©ν•μ§€ μ•μ•„λ„ λλ―€λ΅, μ½”λ“κ°€ λ” κ°„κ²°ν•κ³  μ΄ν•΄ν•κΈ° μ‰¬μ›μ§‘λ‹λ‹¤.
// μ΄λ΅ μΈν•΄ μ½”λ“ μ μ§€ κ΄€λ¦¬κ°€ μ‰¬μ›μ§€κ³ , λ²„κ·Έ λ°μƒ ν™•λ¥ μ΄ μ¤„μ–΄λ“¤ μ μμµλ‹λ‹¤.
// - λΉ λ¥Έ λ°μ΄ν„° μ—‘μ„Έμ¤: λ°μ΄ν„°λ² μ΄μ¤μ™€ κ°™μ€ μμ›μ— μ ‘κ·Όν•΄μ•Ό ν•λ” κ²½μ°, μ„λ²„ μ»΄ν¬λ„νΈλ” μ„λ²„μ™€ λ°μ΄ν„°λ² μ΄μ¤κ°€ κ°€κΉμ΄ μ„μΉμ—μ„ μ‘λ™ν•λ―€λ΅, λ” λΉ λ¥Έ μ†λ„λ΅ ν•„μ”ν• λ°μ΄ν„°μ— μ ‘κ·Όν•  μ μμµλ‹λ‹¤.
// - λ³΄μ•: μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈμ— λ―Όκ°ν• μ •λ³΄(μ: λ°μ΄ν„°λ² μ΄μ¤ λΉ„λ°€λ²νΈ)λ¥Ό μ „μ†΅ν•μ§€ μ•μµλ‹λ‹¤. μ΄λ΅ μΈν•΄, ν•„μ”ν• μ‘μ—…μ„ μ•μ „ν•κ² μ²λ¦¬ν•λ©΄μ„ λ™μ‹μ— ν΄λΌμ΄μ–ΈνΈμ λ³΄μ•μ„ μ μ§€ν•  μ μμµλ‹λ‹¤.
// - ν–¥μƒλ μ„±λ¥: μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈλ΅ JavaScript μ½”λ“λ¥Ό μ „μ†΅ν•μ§€ μ•μµλ‹λ‹¤. μ΄λ” μ „μ†΅λλ” λ°μ΄ν„°μ μ–‘μ„ μ¤„μ΄κ³ , ν΄λΌμ΄μ–ΈνΈμ λ¶€ν•λ¥Ό μ¤„μ„μΌλ΅μ¨ μ›Ήμ‚¬μ΄νΈμ μ „λ°μ μΈ μ„±λ¥μ„ ν–¥μƒμ‹ν‚¤λ”λ° λ„μ›€μ΄ λ©λ‹λ‹¤.

import Link from "next/link";
import "./globals.css";
import type { Metadata } from "next";
import { useEffect, useState } from "react";
import axios from "axios";
import { ITopic } from "@/interfaces/Topic";
import Control from "@/components/Control";

export const metadata: Metadata = {
  title: "Web tutorial",
  description: "Generated by Woohyun",
};

// κΈ°λ³Έμ μΈ μ›Ή νμ΄μ§€μ κ³¨κ²©
export default async function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  // const [topics, setTopics] = useState<ITopic[]>([]);

  // const getTopics = async () => {
  //   const response = await axios.get("http://localhost:9999/topics");
  //   console.log(response.data);
  //   setTopics(response.data);
  // };

  // useEffect(() => {
  //   getTopics();
  // }, []);
  const response = await axios.get("http://localhost:9999/topics");
  const topics: ITopic[] = response.data;
  console.log(topics);

  return (
    <html>
      <body>
        <h1>
          <Link href="/">WEB</Link>
          {/* Link μ»΄ν¬λ„νΈλ¥Ό μ‚¬μ©ν•¨μΌλ΅μ¨
          1. νμ΄μ§€ λ¦¬λ΅λ”©μ΄ μ—†μ–΄μ΅λ‹¤. 
          2. λ°©λ¬Έν• νμ΄μ§€λ¥Ό λ‹¤μ΄λ΅λ“ λ°›μ§€ μ•λ”λ‹¤. 
          3. λ―Έλ¦¬ νμ΄μ§€λ¥Ό λ‹¤μ΄λ΅λ“ ν•λ‹¤.(λ§μ°μ¤λ¥Ό μ¬λ¦¬λ” μκ°„ λ°±κ·ΈλΌμ΄λ“μ—μ„ λ‹¤μ΄λ΅λ“)  
          π‘‰π» μ¦‰, Linkλ” Next.jsμ—μ„ SPAλ¥Ό μ‰½κ² κµ¬ν„ν•λ„λ΅ λ„μ™€μ£Όλ” λ„κµ¬μ΄λ‹¤ !
          */}
        </h1>
        <ol>
          {topics.map((topic) => (
            <li key={topic.id}>
              <Link href={`/read/${topic.id}`}>{topic.title}</Link>
            </li>
          ))}
        </ol>
        {children}
        <Control />
      </body>
    </html>
  );
}
